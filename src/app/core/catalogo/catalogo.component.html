<div class="grid">
	<div class="generos">
		<h4 class="text-center text-info">Géneros</h4>
		<ul #ListaGeneros>
			<li *ngFor="let item of generos; let i = index;" class="genre-item" (click)="seleccionarGenero(item, i)">{{item.nombre}}</li>
		</ul>
		<mat-form-field>
		  <mat-label>Géneros</mat-label>
		  <mat-select (selectionChange)="seleccionarGenero($event.value, null)">
		    <mat-option *ngFor="let item of generos" [value]="item">
		      {{item.nombre}}
		    </mat-option>
		  </mat-select>
		</mat-form-field>
	</div>
	<div class="busqueda">
	  <mat-form-field>
		  <button mat-button matPrefix mat-icon-button aria-label="Clear" (click)="filtrarPeliculas()">
		    <mat-icon>search</mat-icon>
		  </button>
	    <input matInput type="text" [(ngModel)]="filtro" placeholder="Ingrese su búsqueda">
		  <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="nueva_pelicula.titulo=''">
		    <mat-icon>clear</mat-icon>
		  </button>
	  </mat-form-field>
	</div>
	<div class="catalogo">
		<mat-card class="new-movie movie-item" *ngIf="addMovieOn">
		  <mat-card-content>

		    <h6>Titulo</h6>
				<mat-form-field>
				  <input matInput type="text" placeholder="Escriba el títutlo" [(ngModel)]="nueva_pelicula.titulo">
				  <button mat-button matSuffix mat-icon-button aria-label="Clear" (click)="nueva_pelicula.titulo=''">
				    <mat-icon>close</mat-icon>
				  </button>
				</mat-form-field>
				<mat-form-field>
				  <mat-label>Seleccione la categoría</mat-label>
				  <mat-select [(ngModel)]="nueva_pelicula.generoId">
				    <mat-option *ngFor="let item of generos" [value]="item.id">
				      {{item.nombre}}
				    </mat-option>
				  </mat-select>
				</mat-form-field>
				<div class="inline">
			    <h6>Fecha de estreno</h6>
					<mat-form-field>
					  <input matInput [matDatepicker]="picker" (dateInput)="asignarFechaPelicula('input', $event)" (dateChange)="asignarFechaPelicula('change', $event)">
					  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
					  <mat-datepicker #picker></mat-datepicker>
					</mat-form-field>
				</div>
			  <h6>Descripción</h6>
			  <mat-form-field>
			    <textarea matInput rows="3" [(ngModel)]="nueva_pelicula.sinopsis"></textarea>
			  </mat-form-field>
			  <mat-card-actions class="float-right">
			    <button mat-button class="btn btn-success btn-sm" (click)="cancelarPelicula()">Cancelar</button>
			    <button mat-button class="btn btn-primary btn-sm" (click)="guardarPelicula()">Guardar</button>
			  </mat-card-actions>
		  </mat-card-content>
		</mat-card>
		<mat-card class="movie-item" *ngFor="let movie of peliculas">
		  <mat-card-header>
		  	<div class="split">
			    <h6 class="text-secondary">{{movie.titulo}}</h6>
		    	<button mat-mini-fab color="basic" (click)="borrarPelicula(movie)">
		    		<mat-icon>close</mat-icon>
		    	</button>
		  	</div>
		  </mat-card-header>
		  <mat-card-content>
		  	<h6 class="genre">{{getGenre(movie.generoId)}}</h6>
		  	<h6 class="text-secondary">Fecha de estreno: {{parseDate(movie.fechaEstreno)}}</h6>
		    <p>{{movie.sinopsis}}</p>
		  </mat-card-content>
		</mat-card>
	</div>
</div>

<button mat-mini-fab class="add-movie" (click)="agregarPelicula()">
	<mat-icon>add</mat-icon>
</button>


<div class="spinner-content"
  *ngIf="isLoad">
  <mat-spinner></mat-spinner>
</div>